# INTcoin Configuration File - TOR Edition
# Copyright (c) 2025 INTcoin Core (Maddison Lane)
# Distributed under the MIT software license

# This is a sample configuration for running INTcoin with TOR support
# Copy this file to ~/.intcoin/intcoin.conf and adjust as needed

##
## Network Settings
##

# Listen for incoming connections
listen=1

# Maximum number of connections
maxconnections=64

# Port to listen on (default: 9333, testnet: 19333)
port=9333

# Bind to specific IP (when using TOR, bind to localhost)
bind=127.0.0.1

##
## TOR Configuration
##

# Enable TOR support
tor=1

# TOR SOCKS5 proxy address (default: 127.0.0.1:9050)
torproxy=127.0.0.1:9050

# TOR SOCKS5 authentication (optional)
# torproxyuser=username
# torproxypass=password

# TOR connection timeout in milliseconds (default: 30000)
tortimeout=30000

# TOR control port for advanced features
torcontrol=127.0.0.1:9051

# TOR control authentication (choose one method)
# Method 1: Password authentication
# torpassword=your_control_password

# Method 2: Cookie authentication (default if available)
# torcookie=/var/lib/tor/control_auth_cookie

##
## Hidden Service Configuration
##

# Enable hidden service (become a .onion node)
hiddenservice=1

# Hidden service data directory
# This directory will store your .onion private keys
hiddensrvdir=/var/lib/intcoin/onion_service

# Hidden service port mapping (virtual_port:target_port)
hiddensrvport=8333:8333

# Automatically announce our .onion address to peers
discoverhiddenservice=1

##
## Network Mode
##

# Network mode selection (choose one)
# Option 1: Mixed mode - Both TOR and clearnet (default)
# No additional configuration needed

# Option 2: Onion-only mode - TOR connections only (maximum privacy)
# Uncomment the following lines for onion-only mode:
# onlynet=onion
# nodnsseed=1

# Option 3: Prefer onion - Use TOR when available, clearnet as fallback
# preferonion=1

##
## Peer Management
##

# Maximum onion peers
maxonionpeers=64

# Add specific onion seed nodes (examples)
# addnode=seed1.intcoin.onion:8333
# addnode=seed2.intcoin.onion:8333
# addnode=node1.example.onion:8333

# Connect only to specific nodes
# connect=specific.node.onion:8333

##
## Privacy & Security
##

# Enable TOR stream isolation (each connection uses separate circuit)
torisolation=1

# Disable UPnP to prevent IP leaks
upnp=0

# Disable local service discovery
discover=0

# Don't expose your IP in version messages
externalip=

##
## RPC Settings
##

# Enable RPC server
server=1

# RPC username and password (CHANGE THESE!)
rpcuser=intcoinrpc
rpcpassword=CHANGE_THIS_PASSWORD_TO_SOMETHING_SECURE

# RPC allowed IPs (local only for security)
rpcallowip=127.0.0.1

# RPC port
rpcport=8332

# RPC bind address (localhost only)
rpcbind=127.0.0.1

##
## Logging
##

# Debug logging (set to 1 for verbose logging)
debug=0

# Log TOR-specific events
# debugtor=1

# Log network events
# debugnet=1

# Log timestamps
logtimestamps=1

# Log file location (default: ~/.intcoin/debug.log)
# debuglogfile=/var/log/intcoin/debug.log

##
## Mining (disabled by default)
##

# Enable mining (set to 1 to enable)
gen=0

# Mining threads (if gen=1)
# genproclimit=1

##
## Wallet
##

# Enable wallet functionality
wallet=1

# Wallet file name
# walletfile=wallet.dat

# Wallet backup directory
# walletbackup=/var/backups/intcoin/

##
## Advanced TOR Settings
##

# Custom TOR data directory
# tordatadir=/var/lib/tor

# Force new TOR circuit on startup
# tornewcircuit=1

# Minimum TOR version required
# torminversion=0.4.7.0

# TOR circuit build timeout (seconds)
# torcircuittimeout=60

# Allow mixed TOR and clearnet in same transaction path
# tormixedmode=1

##
## Performance Tuning for TOR
##

# Reduce block size for better TOR propagation
# maxblocksize=500000

# Increase network timeouts for TOR latency
timeout=300

# Reduce mempool size for TOR nodes
# maxmempool=100

# Limit peer ban score (TOR connections can be slower)
# banscore=150

##
## Additional Network Options
##

# Disable IPv6 (if not needed)
# ipv6=0

# Proxy for DNS lookups (use TOR)
# proxydns=1

# Random delays for better privacy
# randomizenetworkdelay=1

##
## Testing & Development
##

# Testnet mode
# testnet=1

# Regtest mode (for development)
# regtest=1

##
## Notes
##

# 1. Generate a strong RPC password:
#    python -c 'import secrets; print(secrets.token_hex(32))'
#
# 2. Verify TOR is running:
#    systemctl status tor
#
# 3. Get your .onion address:
#    intcoin-cli gethiddenserviceaddress
#
# 4. Check TOR status:
#    intcoin-cli getnetworkinfo
#
# 5. Monitor connections:
#    intcoin-cli getpeerinfo
#
# 6. For onion-only mode, ensure your firewall blocks non-TOR traffic
#
# 7. Keep TOR updated for security:
#    apt-get update && apt-get upgrade tor

##
## Security Checklist
##

# [ ] Changed default RPC password
# [ ] TOR is installed and running
# [ ] Firewall configured (if using onion-only)
# [ ] Hidden service directory has correct permissions (700)
# [ ] Regular backups of wallet and configuration
# [ ] TOR logs reviewed for errors
# [ ] Node connectivity tested
# [ ] .onion address recorded securely
